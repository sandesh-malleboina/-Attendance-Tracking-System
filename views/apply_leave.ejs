<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for Leave</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f4f4f9;
        }
        body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('/assets/bg.jpg'); 
      background-size: cover;
      background-position: center;
      opacity: 0.7; 
      z-index: -2; 
    }

    body::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%);
      z-index: -1; 
    }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-body">
                <h1 class="card-title text-center">Apply for Leave</h1>
                <% if (student && student.studentid) { %>
                    <form action="/apply_leave" method="POST">
                        <div class="form-group">
                            <label for="student-id">Student ID</label>
                            <input type="text" id="student-id" name="studentId" class="form-control" value="<%= student.studentid %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="student-name">Student Name</label>
                            <input type="text" id="student-name" name="studentName" class="form-control" value="<%= student.fname %> <%= student.lname %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="department">Department</label>
                            <input type="text" id="department" name="department" class="form-control" value="<%= student.department %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="start-date">Leave Start Date</label>
                            <input type="date" id="start-date" name="startDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="end-date">Leave End Date</label>
                            <input type="date" id="end-date" name="endDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="leave-reason">Leave Reason</label>
                            <textarea id="leave-reason" name="reason" class="form-control" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="leave-type">Leave Type</label>
                            <select id="leave-type" name="type" class="form-control" required>
                                <option value="sick">Medical Leave</option>
                                <option value="personal">On Duty</option>
                                <option value="other">Family Calamity</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">Apply</button>
                    </form>
                    <a href="/leave_history" class="btn btn-secondary btn-block mt-3">View Leave History</a>
                <% } else { %>
                    <p>No student details found.</p>
                <% } %>
            </div>
        </div>
    </div>
</body>
</html>
